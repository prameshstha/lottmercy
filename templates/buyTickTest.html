<!DOCTYPE html>
<html lang="en">
<head>

{% extends 'master.html' %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
</head>

    <title>Buy Ticket</title>
<body>
{% block body %}


<div class="container">

<h1>Please choose number of tickets you want to buy:</h1>

  <label for="tickets">Choose number of tickets:</label>
 <form action="{% url 'buyTicketStore' %}" method="POST" name="ticket" onclick="ChoosenTicketNum()">
     {% csrf_token %}
  <select name="tickNumbers" id="tickNumber" onchange="ticketCount()">
      <option value="0">0 Games - $0.00</option>
      <option value="4">4 Games - $5.40</option>
      <option value="5">5 Games - $6.75</option>
      <option value="6">6 Games - $8.10</option>
      <option value="7">7 Games - $9.45</option>
      <option value="8">8 Games - $10.80</option>
      <option value="9">9 Games - $12.15</option>
      <option value="10">10 Games - $13.50</option>
      <option value="11">11 Games - $14.85</option>
      <option value="12">12 Games - $16.20</option>
      <option value="13">13 Games - $17.55</option>
      <option value="14">14 Games - $18.90</option>
      <option value="15">15 Games - $20.25</option>
      <option value="16">16 Games - $21.60</option>
      <option value="17">17 Games - $22.95</option>
      <option value="18">18 Games - $24.30</option><option value="19">19 Games - $25.65</option><option value="20">20 Games - $27.00</option><option value="21">21 Games - $28.35</option><option value="22">22 Games - $29.70</option><option value="23">23 Games - $31.05</option><option value="24">24 Games - $32.40</option><option value="25">25 Games - $33.75</option><option value="26">26 Games - $35.10</option><option value="27">27 Games - $36.45</option><option value="28">28 Games - $37.80</option><option value="29">29 Games - $39.15</option><option value="30">30 Games - $40.50</option><option value="31">31 Games - $41.85</option><option value="32">32 Games - $43.20</option><option value="33">33 Games - $44.55</option><option value="34">34 Games - $45.90</option><option value="35">35 Games - $47.25</option><option value="36">36 Games - $48.60</option><option value="37">37 Games - $49.95</option><option value="38">38 Games - $51.30</option><option value="39">39 Games - $52.65</option><option value="40">40 Games - $54.00</option><option value="41">41 Games - $55.35</option><option value="42">42 Games - $56.70</option><option value="43">43 Games - $58.05</option><option value="44">44 Games - $59.40</option><option value="45">45 Games - $60.75</option><option value="46">46 Games - $62.10</option><option value="47">47 Games - $63.45</option><option value="48">48 Games - $64.80</option><option value="49">49 Games - $66.15</option><option value="50">50 Games - $67.50</option><option value="51">51 Games - $68.85</option><option value="52">52 Games - $70.20</option><option value="53">53 Games - $71.55</option><option value="54">54 Games - $72.90</option><option value="55">55 Games - $74.25</option><option value="56">56 Games - $75.60</option><option value="57">57 Games - $76.95</option><option value="58">58 Games - $78.30</option><option value="59">59 Games - $79.65</option><option value="60">60 Games - $81.00</option><option value="61">61 Games - $82.35</option><option value="62">62 Games - $83.70</option><option value="63">63 Games - $85.05</option><option value="64">64 Games - $86.40</option><option value="65">65 Games - $87.75</option><option value="66">66 Games - $89.10</option><option value="67">67 Games - $90.45</option><option value="68">68 Games - $91.80</option><option value="69">69 Games - $93.15</option><option value="70">70 Games - $94.50</option><option value="71">71 Games - $95.85</option><option value="72">72 Games - $97.20</option><option value="73">73 Games - $98.55</option><option value="74">74 Games - $99.90</option><option value="75">75 Games - $101.25</option><option value="76">76 Games - $102.60</option><option value="77">77 Games - $103.95</option><option value="78">78 Games - $105.30</option><option value="79">79 Games - $106.65</option><option value="80">80 Games - $108.00</option><option value="81">81 Games - $109.35</option><option value="82">82 Games - $110.70</option><option value="83">83 Games - $112.05</option><option value="84">84 Games - $113.40</option><option value="85">85 Games - $114.75</option><option value="86">86 Games - $116.10</option><option value="87">87 Games - $117.45</option><option value="88">88 Games - $118.80</option><option value="89">89 Games - $120.15</option><option value="90">90 Games - $121.50</option><option value="91">91 Games - $122.85</option><option value="92">92 Games - $124.20</option><option value="93">93 Games - $125.55</option><option value="94">94 Games - $126.90</option><option value="95">95 Games - $128.25</option><option value="96">96 Games - $129.60</option><option value="97">97 Games - $130.95</option><option value="98">98 Games - $132.30</option><option value="99">99 Games - $133.65</option><option value="100">100 Games - $135.00</option>

  </select>

  <div class="row m-1" id="myDIV" style="visibility:hidden">

      <div class="col-6">
          <div class="row ">

             <div class="" id="selectNumber" >

            </div>
                  <input type="submit" value="Save Page" class="btn btn-primary text-white" id="ChoosenTicketNum()" />

          </div>
      </div>
        <style type="text/css">
        td {font-size:12px;border-width: 1px;border-style: solid;border-color: #729ea5;}
        tr:hover {cursor: pointer}
        .fixed {width:400px;border-width: 1px;border-color: #729ea5;border-collapse: collapse; position:fixed;}

        </style>



      <div class=" col-4 " style="height:100%;position:fixed; margin-left:35%" >

          <div class="row" id="numPow">

          </div>
      </div></nav>
      <div class="col-1" style="margin-left:40%; position:fixed;">

          <a href="#" onclick="quickPick({{numbArray}}, {{pArray}})" class="btn btn-primary">Quick Pick</a>
          <a href="#" onclick="clearAll()" class="btn btn-primary">Clear All Games</a>
          <a href="#" onclick="showWinningNumbers({{winningNumShuffle}}, {{pwBall}})" class="btn btn-primary">Play</a>

      </div>

  </div>
 </form>

</div>

    <script type="text/javascript">
    function ChoosenTicketNum(){
        var tickN = document.getElementById("tickNumber").value;
        console.log(tickN);
        return tickN;
    }

    function showWinningNumbers(winningNumShuffle, pwBall){
        console.log(winningNumShuffle, pwBall);
        var w = winningNumShuffle;
        var p = pwBall;
        var c = 0;
        var items = document.querySelectorAll('.gameNumbers');
        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            console.log("itemmms", item.value);
            // validate
            if(item.value == ""){
                console.log("fill all the numbers first");
                c += 1;
            }
        }
        if(c>0){
            alert("fill all the number first");
        }
        else{
            alert((winningNumShuffle.toString())+" - "+ pwBall.toString());

        }


    }

    function fillNumber(n){
        var usedNum =[];
        aaa= document.getElementsByClassName('highlight');
        id = aaa[0].id;
        console.log(id, 'iidd');
        if (id.length >= 11){
            var position = id[0]+id[1]
            console.log('pos >11', position);
        }
        else{
            var position = id[0];
        }
        for(v = 1; v <= 7; v++){
            console.log(position, v, 'position and v')
            var inputVal = document.getElementById(position+"text"+v).value;
            usedNum.push(parseInt(inputVal))
            console.log(inputVal);

            }

            console.log(usedNum, "this this", position);
            console.log(usedNum.includes(n), n);
            var tickN = document.getElementById("tickNumber").value;

            if((!usedNum.includes(n))){
                usedNum.push(n);
                console.log(usedNum, "dd", position);
                for(count = 1; count<=7; count++){
                    if(document.getElementById(position+"text"+count).value == ""){
                    document.getElementById(position+"text"+count).value = n;
                    document.getElementById('n'+n).classList.add('highlight');

                    // stoping filling same number to all boxes
                    if(document.getElementById(position+"text"+count).value != ""){
                        console.log("not empty" , count);
                        console.log(count, 'count', 'position', position);
                        break;
                    }
                    }
                }
            }
            else{
                var classs = document.getElementById('n'+n);
                if (classs.className == 'highlight'){
                    console.log('clsss', classs.className );
                    for(count = 1; count<=7; count++){
                        v1 = document.getElementById(position+"text"+count).value;
                        console.log(v1,n, 'compare');
                        if(v1 == n){
                            console.log('if comapre');
                            document.getElementById(position+"text"+count).value = "";
                        }
                    }
                    classs.classList.remove('highlight');
                }
            }

    }

    function fillPowerBall(p){
        aaa= document.getElementsByClassName('highlight');
        id = aaa[0].id;
        console.log(id, 'iidd');
        if (id.length >= 11){
            var position = id[0]+id[1]
            console.log('pos >11', position);
        }
        else{
            var position = id[0];
        }
        console.log(document.getElementById(position+"power").value, 'again value');
            if(document.getElementById(position+"power").value == "" ){
                document.getElementById(position+"power").value = p;
                var inpPower = document.getElementById("p"+p);
                inpPower.classList.add('highlight');
            }
            else{
                if(document.getElementById(position+"power").value == p){
                    document.getElementById(position+"power").value = '';
                    var inpPower = document.getElementById("p"+p);
                    inpPower.classList.remove('highlight');
                }

            }



    }


    function ticketCount(){
        var a = document.getElementById("tickNumber").value;
        console.log(a);
        var x = document.getElementById("myDIV");
        if (a > 0){
            console.log('greater');
            x.style.visibility = "visible";

            var lottoNumber = document.getElementById("lottoNumber");
            if(lottoNumber){
                document.getElementById("lottoNumber").remove();
            }
            var selectNumber = document.getElementById("selectNumber");

            var divMain = document.createElement("div");
            divMain.setAttribute("id", "lottoNumber");


            for (var i=1; i<=a; i++){
                var numPow = document.createElement("div");
                numPow.setAttribute("id", i+"numPow");
                var list = document.createElement("div");
                list.setAttribute("id", i+"gameCount");
                list.setAttribute("class", "gameCount");
                list.setAttribute("onclick", "highlight(this)");

                list.innerHTML = i+".";
                divMain.appendChild(list);
                divMain.appendChild(numPow);

                for (j=1; j<=7; j++){
                    var txt = document.createElement("input");
                    txt.setAttribute("id", i+"text"+j);
                    txt.setAttribute("class", "gameNumbers");
                    txt.setAttribute("name", i+"gameNumber"+j);
                    txt.setAttribute("readonly", "readonly")

                    list.appendChild(txt);
                    selectNumber.appendChild(divMain);
                }
                var txtPower = document.createElement("input");
                list.appendChild(txtPower);
                txtPower.setAttribute("id", i+"power");
                txtPower.setAttribute("class", "powerBall" + "");
                txtPower.setAttribute("readonly", "readonly");
                txtPower.setAttribute("name", "powerBall"+i);


            }
        }
        else{
            x.style.display = "none";
        }

    }
    function clearAll(){
        var inp = document.getElementsByTagName("input");
        var cl = document.getElementsByClassName("highlight");
        console.log(cl, 'cl', cl.length)
        var len = cl.length;
        for(var x = len-1; x >= 0 ; x--){ // this is because removing class is live selector, chances in every iteration.
            //console.log(cl[x], x)
            cl[x].classList.remove('highlight');
        }

        for (var ii=0; ii < inp.length; ii++) {
          if (inp[ii].type == "text") {
            inp[ii].value = "";
            console.log(inp[0].className)
          }
        }


    }
    function quickPick(n, p){
        var a = document.getElementById("tickNumber").value;
        const random = Math.floor(Math.random() * n.length);
        console.log(a+" quickpick", random);
        var i;
        var j;
        var randomArray = [];
        for( i=1; i<=a; i++){
            console.log(n, "for loop outside");
            for(j=1; j<=7; j++){
                console.log(i+"check empty")
                console.log(document.getElementById(i+"text"+j).value == "")
                if (document.getElementById(i+"text"+j).value == ""){
                    const random = Math.floor(Math.random() * n.length);

                    if(randomArray.includes(random)){
                        //const random = Math.floor(Math.random() * n.length);
                        console.log(random, "if true");
                        j--;

                    }
                    else{
                        document.getElementById(i+"text"+j).value = n[random];
                        console.log(random+1, "selected")
                        randomArray.push(random);
                        console.log(random, randomArray, "randomArray", !randomArray.includes(random));
                    }
                }


            }
            console.log(j, "iiiiiiii");
                    randomArray.splice(0, randomArray.length);
            if (document.getElementById(i+"power").value == ""){
                document.getElementById(i+"power").value = p[Math.floor(Math.random() * 20)];
            }

        }
    }
function highlight(elem){
    var id = elem.id;
    if (id.length >= 12){
        var position = id[0]+id[1]+id[2];
        console.log('pos >=12', position);
    }
    else if (id.length == 11){
        var position = id[0]+id[1]
        console.log('pos >11', position);
    }
    else{
        var position = id[0];
    }

    var a = document.getElementsByClassName("gameCount");
    var c = document.getElementsByClassName("gameNumbers");
    var np = document.getElementById('np'+position);
    var tab = document.getElementById(position+'numPow');
    console.log( elem.id, np, 'here');


    var table = document.getElementsByClassName("table-responsive");
    if(table.length > 0){
        console.log(table.length,'table', elem, 'tab' ,tab.id);
        console.log(table[0].id, 'dfdfdf');
        var td1 = table[0].id;
        if (td1 >= 5){
            var td = td1[2]+td1[3]+td1[4];
            console.log('pos >=12', td);
        }
        else if (td1 == 4){
            var td = td1[2]+td1[3]
            console.log('pos >11', td);
        }
        else{
            var td = td1[2];
        }
        console.log(td, position);
    }


    if(table.length>0){

        for(var i=0; i <= table.length-1; i++){
            table[i].remove();
        }

        if(td != position){
            tab.insertAdjacentHTML('beforeend', '<div class="table-responsive"><table class="table teal lighten-3"><tr><td colspan="7"><strong>Select 7 lucky numbers</strong></td></tr><tr><td onclick="fillNumber(1)" id="n1"> 1</td><td onclick="fillNumber(2)" id="n2"> 2</td><td onclick="fillNumber(3)" id="n3"> 3</td><td onclick="fillNumber(4)" id="n4"> 4</td><td onclick="fillNumber(5)" id="n5"> 5</td><td onclick="fillNumber(6)" id="n6"> 6</td><td onclick="fillNumber(7)" id="n7"> 7</td></tr><tr><td onclick="fillNumber(8)" id="n8"> 8</td><td onclick="fillNumber(9)" id="n9"> 9</td><td onclick="fillNumber(10)" id="n10"> 10</td><td  onclick="fillNumber(11)" id="n11"> 11</td><td onclick="fillNumber(12)" id="n12"> 12</td><td onclick="fillNumber(13)" id="n13"> 13</td><td onclick="fillNumber(14)" id="n14"> 14</td></tr><tr><td onclick="fillNumber(15)" id="n15"> 15</td><td onclick="fillNumber(16)" id="n16"> 16</td><td onclick="fillNumber(17)" id="n17"> 17</td><td onclick="fillNumber(18)" id="n18"> 18</td><td onclick="fillNumber(19)" id="n19"> 19</td><td onclick="fillNumber(20)" id="n20"> 20</td><td onclick="fillNumber(21)" id="n21"> 21</td></tr><tr><td onclick="fillNumber(22)" id="n22"> 22</td><td onclick="fillNumber(23)" id="n23"> 23</td><td onclick="fillNumber(24)" id="n24"> 24</td><td onclick="fillNumber(25)" id="n25"> 25</td><td onclick="fillNumber(26)" id="n26"> 26</td><td onclick="fillNumber(27)" id="n27"> 27</td><td onclick="fillNumber(28)" id="n28"> 28</td></tr><tr><td onclick="fillNumber(29)" id="n29"> 29</td><td onclick="fillNumber(30)" id="n30"> 30</td><td onclick="fillNumber(31)" id="n31"> 31</td><td onclick="fillNumber(32)" id="n32"> 32</td><td onclick="fillNumber(33)" id="n33"> 33</td><td onclick="fillNumber(34)" id="n34"> 34</td><td onclick="fillNumber(35)" id="n35"> 35</td></tr></table><table class="table teal lighten-3"><tr><td colspan="7"><strong>Select 1 Powerball</strong></td></tr><tr><tr><td onclick="fillPowerBall(1)" id="p1"> 1</td><td onclick="fillPowerBall(2)" id="p2"> 2</td><td onclick="fillPowerBall(3)" id="p3"> 3</td><td onclick="fillPowerBall(4)" id="p4"> 4</td><td onclick="fillPowerBall(5)" id="p5"> 5</td><td onclick="fillPowerBall(6)" id="p6"> 6</td><td onclick="fillPowerBall(7)" id="p7"> 7</td></tr><tr><td onclick="fillPowerBall(8)" id="p8"> 8</td><td onclick="fillPowerBall(9)" id="p9"> 9</td><td onclick="fillPowerBall(10)" id="p10"> 10</td><td  onclick="fillPowerBall(11)"  id="p11"> 11</td><td onclick="fillPowerBall(12)" id="p12"> 12</td><td onclick="fillPowerBall(13)" id="p13"> 13</td><td onclick="fillPowerBall(14)" id="p14"> 14</td></tr><tr><td onclick="fillPowerBall(15)" id="p15"> 15</td><td onclick="fillPowerBall(16)" id="p16"> 16</td><td onclick="fillPowerBall(17)" id="p17"> 17</td><td onclick="fillPowerBall(18)" id="p18"> 18</td><td onclick="fillPowerBall(19)" id="p19"> 19</td><td onclick="fillPowerBall(20)" id="p20"> 20</td></tr></table></div>');
            var nn = document.getElementsByClassName('table-responsive');
            console.log(nn);
            nn[0].setAttribute("id", "np"+position);
        }

    }else{
        tab.insertAdjacentHTML('beforeend', '<div class="table-responsive"><table class="table teal lighten-3"><tr><td colspan="7"><strong>Select 7 lucky numbers</strong></td></tr><tr><td onclick="fillNumber(1)" id="n1"> 1</td><td onclick="fillNumber(2)" id="n2"> 2</td><td onclick="fillNumber(3)" id="n3"> 3</td><td onclick="fillNumber(4)" id="n4"> 4</td><td onclick="fillNumber(5)" id="n5"> 5</td><td onclick="fillNumber(6)" id="n6"> 6</td><td onclick="fillNumber(7)" id="n7"> 7</td></tr><tr><td onclick="fillNumber(8)" id="n8"> 8</td><td onclick="fillNumber(9)" id="n9"> 9</td><td onclick="fillNumber(10)" id="n10"> 10</td><td  onclick="fillNumber(11)" id="n11"> 11</td><td onclick="fillNumber(12)" id="n12"> 12</td><td onclick="fillNumber(13)" id="n13"> 13</td><td onclick="fillNumber(14)" id="n14"> 14</td></tr><tr><td onclick="fillNumber(15)" id="n15"> 15</td><td onclick="fillNumber(16)" id="n16"> 16</td><td onclick="fillNumber(17)" id="n17"> 17</td><td onclick="fillNumber(18)" id="n18"> 18</td><td onclick="fillNumber(19)" id="n19"> 19</td><td onclick="fillNumber(20)" id="n20"> 20</td><td onclick="fillNumber(21)" id="n21"> 21</td></tr><tr><td onclick="fillNumber(22)" id="n22"> 22</td><td onclick="fillNumber(23)" id="n23"> 23</td><td onclick="fillNumber(24)" id="n24"> 24</td><td onclick="fillNumber(25)" id="n25"> 25</td><td onclick="fillNumber(26)" id="n26"> 26</td><td onclick="fillNumber(27)" id="n27"> 27</td><td onclick="fillNumber(28)" id="n28"> 28</td></tr><tr><td onclick="fillNumber(29)" id="n29"> 29</td><td onclick="fillNumber(30)" id="n30"> 30</td><td onclick="fillNumber(31)" id="n31"> 31</td><td onclick="fillNumber(32)" id="n32"> 32</td><td onclick="fillNumber(33)" id="n33"> 33</td><td onclick="fillNumber(34)" id="n34"> 34</td><td onclick="fillNumber(35)" id="n35"> 35</td></tr></table><table class="table teal lighten-3"><tr><td colspan="7"><strong>Select 1 Powerball</strong></td></tr><tr><tr><td onclick="fillPowerBall(1)" id="p1"> 1</td><td onclick="fillPowerBall(2)" id="p2"> 2</td><td onclick="fillPowerBall(3)" id="p3"> 3</td><td onclick="fillPowerBall(4)" id="p4"> 4</td><td onclick="fillPowerBall(5)" id="p5"> 5</td><td onclick="fillPowerBall(6)" id="p6"> 6</td><td onclick="fillPowerBall(7)" id="p7"> 7</td></tr><tr><td onclick="fillPowerBall(8)" id="p8"> 8</td><td onclick="fillPowerBall(9)" id="p9"> 9</td><td onclick="fillPowerBall(10)" id="p10"> 10</td><td  onclick="fillPowerBall(11)"  id="p11"> 11</td><td onclick="fillPowerBall(12)" id="p12"> 12</td><td onclick="fillPowerBall(13)" id="p13"> 13</td><td onclick="fillPowerBall(14)" id="p14"> 14</td></tr><tr><td onclick="fillPowerBall(15)" id="p15"> 15</td><td onclick="fillPowerBall(16)" id="p16"> 16</td><td onclick="fillPowerBall(17)" id="p17"> 17</td><td onclick="fillPowerBall(18)" id="p18"> 18</td><td onclick="fillPowerBall(19)" id="p19"> 19</td><td onclick="fillPowerBall(20)" id="p20"> 20</td></tr></table></div>');
        var nn = document.getElementsByClassName('table-responsive');
        console.log(nn);
        nn[0].setAttribute("id", "np"+position);

    }

    for (i = 0; i < a.length; i++) {
        a[i].classList.remove('highlight');
    }
    elem.classList.add('highlight');

    var b = document.getElementsByTagName('input')

    for(x = 1; x <= 35; x++){
        var h = document.getElementById('n'+x);
        if(h!==null){
            h.classList.remove('highlight');
        }

    }
    for(x = 1; x <= 20; x++){
    var h = document.getElementById('p'+x);
    if(h!==null){
            h.classList.remove('highlight');
        }
    }
    if(elem.id.length >= 11){
        var line = elem.id[0]+elem.id[1];
    }
    else{
        var line = elem.id[0];
    }
    for(i = 1; i<=7; i++){
        var d = document.getElementById(line+'text'+i).value;
        console.log(d,'d');
        if(d != ''){
            var el = document.getElementById('n'+d);
            el.classList.add('highlight');
        }
        var p = document.getElementById(line+'power').value;
        if(p != ''){
            var l = document.getElementById('p'+p);
            l.classList.add('highlight');
        }



    }
}

function callTest(){
    console.log('test function');
}
    </script>

    <style>
    textarea:focus, input:focus{
    outline: none;
}
.highlightTextarea{
    border: 2px solid #5555f8;
    }
        .left {
            float: left;
          width: 50px;
          height: 50px;
          border: 1px solid #9292bb;
          margin: 1px;

          text-align: center;
        }
        .gameNumbers{
          margin:5px;
          width: 50px;
          height: 50px;
          border: 1px solid #9292bb;
          readonly: readonly;
          text-align: center;
          border-radius: 10px;
        }
        .powerBall{
         margin:5px;
          width: 50px;
          height: 50px;
          border: 1px solid #9292bb;

          text-align: center;
            border-radius: 100%;
        }
       .input{
            border: 2px solid #5555f8
        }
</style>
<!--// for highlight-->
<style>
.gameCount:hover, #selected_divs, .QuickStartLong:hover {
        border: 2px solid rgb(184, 225, 252);
        border-radius:5px;
    }
.highlight {
      background: rgb(184, 225, 252);
      border-radius:5px;
    }
</style>
<script>

</script>


</body>
</html>
{% endblock %}